<html>
<head>
<title>rrset.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #5f826b; font-style: italic;}
.s3 { color: #cf8e6d;}
.s4 { color: #bcbec4;}
.s5 { color: #6aab73;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
rrset.py</font>
</center></td></tr></table>
<pre><span class="s0"># Copyright (C) Dnspython Contributors, see LICENSE for text of ISC license</span>

<span class="s0"># Copyright (C) 2003-2017 Nominum, Inc.</span>
<span class="s0">#</span>
<span class="s0"># Permission to use, copy, modify, and distribute this software and its</span>
<span class="s0"># documentation for any purpose with or without fee is hereby granted,</span>
<span class="s0"># provided that the above copyright notice and this permission notice</span>
<span class="s0"># appear in all copies.</span>
<span class="s0">#</span>
<span class="s0"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND NOMINUM DISCLAIMS ALL WARRANTIES</span>
<span class="s0"># WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="s0"># MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL NOMINUM BE LIABLE FOR</span>
<span class="s0"># ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="s0"># WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span>
<span class="s0"># ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT</span>
<span class="s0"># OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>

<span class="s2">&quot;&quot;&quot;DNS RRsets (an RRset is a named rdataset)&quot;&quot;&quot;</span>

<span class="s3">from </span><span class="s1">typing </span><span class="s3">import </span><span class="s1">Any</span><span class="s4">, </span><span class="s1">Collection</span><span class="s4">, </span><span class="s1">Dict</span><span class="s4">, </span><span class="s1">Optional</span><span class="s4">, </span><span class="s1">Union</span><span class="s4">, </span><span class="s1">cast</span>

<span class="s3">import </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span>
<span class="s3">import </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span>
<span class="s3">import </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataset</span>
<span class="s3">import </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">renderer</span>


<span class="s3">class </span><span class="s1">RRset</span><span class="s4">(</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataset</span><span class="s4">.</span><span class="s1">Rdataset</span><span class="s4">):</span>
    <span class="s2">&quot;&quot;&quot;A DNS RRset (named rdataset). 
 
    RRset inherits from Rdataset, and RRsets can be treated as 
    Rdatasets in most cases.  There are, however, a few notable 
    exceptions.  RRsets have different to_wire() and to_text() method 
    arguments, reflecting the fact that RRsets always have an owner 
    name. 
    &quot;&quot;&quot;</span>

    <span class="s1">__slots__ </span><span class="s4">= [</span><span class="s5">&quot;name&quot;</span><span class="s4">, </span><span class="s5">&quot;deleting&quot;</span><span class="s4">]</span>

    <span class="s3">def </span><span class="s1">__init__</span><span class="s4">(</span>
        <span class="s1">self</span><span class="s4">,</span>
        <span class="s1">name</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">,</span>
        <span class="s1">rdclass</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">,</span>
        <span class="s1">rdtype</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType</span><span class="s4">,</span>
        <span class="s1">covers</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType </span><span class="s4">= </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">NONE</span><span class="s4">,</span>
        <span class="s1">deleting</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
    <span class="s4">):</span>
        <span class="s2">&quot;&quot;&quot;Create a new RRset.&quot;&quot;&quot;</span>

        <span class="s1">super</span><span class="s4">().</span><span class="s1">__init__</span><span class="s4">(</span><span class="s1">rdclass</span><span class="s4">, </span><span class="s1">rdtype</span><span class="s4">, </span><span class="s1">covers</span><span class="s4">)</span>
        <span class="s1">self</span><span class="s4">.</span><span class="s1">name </span><span class="s4">= </span><span class="s1">name</span>
        <span class="s1">self</span><span class="s4">.</span><span class="s1">deleting </span><span class="s4">= </span><span class="s1">deleting</span>

    <span class="s3">def </span><span class="s1">_clone</span><span class="s4">(</span><span class="s1">self</span><span class="s4">):</span>
        <span class="s1">obj </span><span class="s4">= </span><span class="s1">super</span><span class="s4">().</span><span class="s1">_clone</span><span class="s4">()</span>
        <span class="s1">obj</span><span class="s4">.</span><span class="s1">name </span><span class="s4">= </span><span class="s1">self</span><span class="s4">.</span><span class="s1">name</span>
        <span class="s1">obj</span><span class="s4">.</span><span class="s1">deleting </span><span class="s4">= </span><span class="s1">self</span><span class="s4">.</span><span class="s1">deleting</span>
        <span class="s3">return </span><span class="s1">obj</span>

    <span class="s3">def </span><span class="s1">__repr__</span><span class="s4">(</span><span class="s1">self</span><span class="s4">):</span>
        <span class="s3">if </span><span class="s1">self</span><span class="s4">.</span><span class="s1">covers </span><span class="s4">== </span><span class="s6">0</span><span class="s4">:</span>
            <span class="s1">ctext </span><span class="s4">= </span><span class="s5">&quot;&quot;</span>
        <span class="s3">else</span><span class="s4">:</span>
            <span class="s1">ctext </span><span class="s4">= </span><span class="s5">&quot;(&quot; </span><span class="s4">+ </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">to_text</span><span class="s4">(</span><span class="s1">self</span><span class="s4">.</span><span class="s1">covers</span><span class="s4">) + </span><span class="s5">&quot;)&quot;</span>
        <span class="s3">if </span><span class="s1">self</span><span class="s4">.</span><span class="s1">deleting </span><span class="s3">is not None</span><span class="s4">:</span>
            <span class="s1">dtext </span><span class="s4">= </span><span class="s5">&quot; delete=&quot; </span><span class="s4">+ </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">to_text</span><span class="s4">(</span><span class="s1">self</span><span class="s4">.</span><span class="s1">deleting</span><span class="s4">)</span>
        <span class="s3">else</span><span class="s4">:</span>
            <span class="s1">dtext </span><span class="s4">= </span><span class="s5">&quot;&quot;</span>
        <span class="s3">return </span><span class="s4">(</span>
            <span class="s5">&quot;&lt;DNS &quot;</span>
            <span class="s4">+ </span><span class="s1">str</span><span class="s4">(</span><span class="s1">self</span><span class="s4">.</span><span class="s1">name</span><span class="s4">)</span>
            <span class="s4">+ </span><span class="s5">&quot; &quot;</span>
            <span class="s4">+ </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">to_text</span><span class="s4">(</span><span class="s1">self</span><span class="s4">.</span><span class="s1">rdclass</span><span class="s4">)</span>
            <span class="s4">+ </span><span class="s5">&quot; &quot;</span>
            <span class="s4">+ </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">to_text</span><span class="s4">(</span><span class="s1">self</span><span class="s4">.</span><span class="s1">rdtype</span><span class="s4">)</span>
            <span class="s4">+ </span><span class="s1">ctext</span>
            <span class="s4">+ </span><span class="s1">dtext</span>
            <span class="s4">+ </span><span class="s5">&quot; RRset: &quot;</span>
            <span class="s4">+ </span><span class="s1">self</span><span class="s4">.</span><span class="s1">_rdata_repr</span><span class="s4">()</span>
            <span class="s4">+ </span><span class="s5">&quot;&gt;&quot;</span>
        <span class="s4">)</span>

    <span class="s3">def </span><span class="s1">__str__</span><span class="s4">(</span><span class="s1">self</span><span class="s4">):</span>
        <span class="s3">return </span><span class="s1">self</span><span class="s4">.</span><span class="s1">to_text</span><span class="s4">()</span>

    <span class="s3">def </span><span class="s1">__eq__</span><span class="s4">(</span><span class="s1">self</span><span class="s4">, </span><span class="s1">other</span><span class="s4">):</span>
        <span class="s3">if </span><span class="s1">isinstance</span><span class="s4">(</span><span class="s1">other</span><span class="s4">, </span><span class="s1">RRset</span><span class="s4">):</span>
            <span class="s3">if </span><span class="s1">self</span><span class="s4">.</span><span class="s1">name </span><span class="s4">!= </span><span class="s1">other</span><span class="s4">.</span><span class="s1">name</span><span class="s4">:</span>
                <span class="s3">return False</span>
        <span class="s3">elif not </span><span class="s1">isinstance</span><span class="s4">(</span><span class="s1">other</span><span class="s4">, </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataset</span><span class="s4">.</span><span class="s1">Rdataset</span><span class="s4">):</span>
            <span class="s3">return False</span>
        <span class="s3">return </span><span class="s1">super</span><span class="s4">().</span><span class="s1">__eq__</span><span class="s4">(</span><span class="s1">other</span><span class="s4">)</span>

    <span class="s3">def </span><span class="s1">match</span><span class="s4">(</span><span class="s1">self</span><span class="s4">, *</span><span class="s1">args</span><span class="s4">: </span><span class="s1">Any</span><span class="s4">, **</span><span class="s1">kwargs</span><span class="s4">: </span><span class="s1">Any</span><span class="s4">) </span><span class="s1">-&gt; bool</span><span class="s4">:  </span><span class="s0"># type: ignore[override]</span>
        <span class="s2">&quot;&quot;&quot;Does this rrset match the specified attributes? 
 
        Behaves as :py:func:`full_match()` if the first argument is a 
        ``dns.name.Name``, and as :py:func:`dns.rdataset.Rdataset.match()` 
        otherwise. 
 
        (This behavior fixes a design mistake where the signature of this 
        method became incompatible with that of its superclass.  The fix 
        makes RRsets matchable as Rdatasets while preserving backwards 
        compatibility.) 
        &quot;&quot;&quot;</span>
        <span class="s3">if </span><span class="s1">isinstance</span><span class="s4">(</span><span class="s1">args</span><span class="s4">[</span><span class="s6">0</span><span class="s4">], </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">):</span>
            <span class="s3">return </span><span class="s1">self</span><span class="s4">.</span><span class="s1">full_match</span><span class="s4">(*</span><span class="s1">args</span><span class="s4">, **</span><span class="s1">kwargs</span><span class="s4">)  </span><span class="s0"># type: ignore[arg-type]</span>
        <span class="s3">else</span><span class="s4">:</span>
            <span class="s3">return </span><span class="s1">super</span><span class="s4">().</span><span class="s1">match</span><span class="s4">(*</span><span class="s1">args</span><span class="s4">, **</span><span class="s1">kwargs</span><span class="s4">)  </span><span class="s0"># type: ignore[arg-type]</span>

    <span class="s3">def </span><span class="s1">full_match</span><span class="s4">(</span>
        <span class="s1">self</span><span class="s4">,</span>
        <span class="s1">name</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">,</span>
        <span class="s1">rdclass</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">,</span>
        <span class="s1">rdtype</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType</span><span class="s4">,</span>
        <span class="s1">covers</span><span class="s4">: </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType</span><span class="s4">,</span>
        <span class="s1">deleting</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
    <span class="s4">) </span><span class="s1">-&gt; bool</span><span class="s4">:</span>
        <span class="s2">&quot;&quot;&quot;Returns ``True`` if this rrset matches the specified name, class, 
        type, covers, and deletion state. 
        &quot;&quot;&quot;</span>
        <span class="s3">if not </span><span class="s1">super</span><span class="s4">().</span><span class="s1">match</span><span class="s4">(</span><span class="s1">rdclass</span><span class="s4">, </span><span class="s1">rdtype</span><span class="s4">, </span><span class="s1">covers</span><span class="s4">):</span>
            <span class="s3">return False</span>
        <span class="s3">if </span><span class="s1">self</span><span class="s4">.</span><span class="s1">name </span><span class="s4">!= </span><span class="s1">name </span><span class="s3">or </span><span class="s1">self</span><span class="s4">.</span><span class="s1">deleting </span><span class="s4">!= </span><span class="s1">deleting</span><span class="s4">:</span>
            <span class="s3">return False</span>
        <span class="s3">return True</span>

    <span class="s0"># pylint: disable=arguments-differ</span>

    <span class="s3">def </span><span class="s1">to_text</span><span class="s4">(  </span><span class="s0"># type: ignore[override]</span>
        <span class="s1">self</span><span class="s4">,</span>
        <span class="s1">origin</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
        <span class="s1">relativize</span><span class="s4">: </span><span class="s1">bool </span><span class="s4">= </span><span class="s3">True</span><span class="s4">,</span>
        <span class="s4">**</span><span class="s1">kw</span><span class="s4">: </span><span class="s1">Dict</span><span class="s4">[</span><span class="s1">str</span><span class="s4">, </span><span class="s1">Any</span><span class="s4">],</span>
    <span class="s4">) </span><span class="s1">-&gt; str</span><span class="s4">:</span>
        <span class="s2">&quot;&quot;&quot;Convert the RRset into DNS zone file format. 
 
        See ``dns.name.Name.choose_relativity`` for more information 
        on how *origin* and *relativize* determine the way names 
        are emitted. 
 
        Any additional keyword arguments are passed on to the rdata 
        ``to_text()`` method. 
 
        *origin*, a ``dns.name.Name`` or ``None``, the origin for relative 
        names. 
 
        *relativize*, a ``bool``.  If ``True``, names will be relativized 
        to *origin*. 
        &quot;&quot;&quot;</span>

        <span class="s3">return </span><span class="s1">super</span><span class="s4">().</span><span class="s1">to_text</span><span class="s4">(</span>
            <span class="s1">self</span><span class="s4">.</span><span class="s1">name</span><span class="s4">, </span><span class="s1">origin</span><span class="s4">, </span><span class="s1">relativize</span><span class="s4">, </span><span class="s1">self</span><span class="s4">.</span><span class="s1">deleting</span><span class="s4">, **</span><span class="s1">kw  </span><span class="s0"># type: ignore</span>
        <span class="s4">)</span>

    <span class="s3">def </span><span class="s1">to_wire</span><span class="s4">(  </span><span class="s0"># type: ignore[override]</span>
        <span class="s1">self</span><span class="s4">,</span>
        <span class="s1">file</span><span class="s4">: </span><span class="s1">Any</span><span class="s4">,</span>
        <span class="s1">compress</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">CompressType</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,  </span><span class="s0"># type: ignore</span>
        <span class="s1">origin</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
        <span class="s4">**</span><span class="s1">kw</span><span class="s4">: </span><span class="s1">Dict</span><span class="s4">[</span><span class="s1">str</span><span class="s4">, </span><span class="s1">Any</span><span class="s4">],</span>
    <span class="s4">) </span><span class="s1">-&gt; int</span><span class="s4">:</span>
        <span class="s2">&quot;&quot;&quot;Convert the RRset to wire format. 
 
        All keyword arguments are passed to ``dns.rdataset.to_wire()``; see 
        that function for details. 
 
        Returns an ``int``, the number of records emitted. 
        &quot;&quot;&quot;</span>

        <span class="s3">return </span><span class="s1">super</span><span class="s4">().</span><span class="s1">to_wire</span><span class="s4">(</span>
            <span class="s1">self</span><span class="s4">.</span><span class="s1">name</span><span class="s4">, </span><span class="s1">file</span><span class="s4">, </span><span class="s1">compress</span><span class="s4">, </span><span class="s1">origin</span><span class="s4">, </span><span class="s1">self</span><span class="s4">.</span><span class="s1">deleting</span><span class="s4">, **</span><span class="s1">kw  </span><span class="s0"># type:ignore</span>
        <span class="s4">)</span>

    <span class="s0"># pylint: enable=arguments-differ</span>

    <span class="s3">def </span><span class="s1">to_rdataset</span><span class="s4">(</span><span class="s1">self</span><span class="s4">) </span><span class="s1">-&gt; dns</span><span class="s4">.</span><span class="s1">rdataset</span><span class="s4">.</span><span class="s1">Rdataset</span><span class="s4">:</span>
        <span class="s2">&quot;&quot;&quot;Convert an RRset into an Rdataset. 
 
        Returns a ``dns.rdataset.Rdataset``. 
        &quot;&quot;&quot;</span>
        <span class="s3">return </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataset</span><span class="s4">.</span><span class="s1">from_rdata_list</span><span class="s4">(</span><span class="s1">self</span><span class="s4">.</span><span class="s1">ttl</span><span class="s4">, </span><span class="s1">list</span><span class="s4">(</span><span class="s1">self</span><span class="s4">))</span>


<span class="s3">def </span><span class="s1">from_text_list</span><span class="s4">(</span>
    <span class="s1">name</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">ttl</span><span class="s4">: </span><span class="s1">int</span><span class="s4">,</span>
    <span class="s1">rdclass</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">rdtype</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">text_rdatas</span><span class="s4">: </span><span class="s1">Collection</span><span class="s4">[</span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">idna_codec</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">IDNACodec</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
    <span class="s1">origin</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
    <span class="s1">relativize</span><span class="s4">: </span><span class="s1">bool </span><span class="s4">= </span><span class="s3">True</span><span class="s4">,</span>
    <span class="s1">relativize_to</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
<span class="s4">) </span><span class="s1">-&gt; RRset</span><span class="s4">:</span>
    <span class="s2">&quot;&quot;&quot;Create an RRset with the specified name, TTL, class, and type, and with 
    the specified list of rdatas in text format. 
 
    *idna_codec*, a ``dns.name.IDNACodec``, specifies the IDNA 
    encoder/decoder to use; if ``None``, the default IDNA 2003 
    encoder/decoder is used. 
 
    *origin*, a ``dns.name.Name`` (or ``None``), the 
    origin to use for relative names. 
 
    *relativize*, a ``bool``.  If true, name will be relativized. 
 
    *relativize_to*, a ``dns.name.Name`` (or ``None``), the origin to use 
    when relativizing names.  If not set, the *origin* value will be used. 
 
    Returns a ``dns.rrset.RRset`` object. 
    &quot;&quot;&quot;</span>

    <span class="s3">if </span><span class="s1">isinstance</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s1">str</span><span class="s4">):</span>
        <span class="s1">name </span><span class="s4">= </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">from_text</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s3">None</span><span class="s4">, </span><span class="s1">idna_codec</span><span class="s4">=</span><span class="s1">idna_codec</span><span class="s4">)</span>
    <span class="s1">rdclass </span><span class="s4">= </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">.</span><span class="s1">make</span><span class="s4">(</span><span class="s1">rdclass</span><span class="s4">)</span>
    <span class="s1">rdtype </span><span class="s4">= </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType</span><span class="s4">.</span><span class="s1">make</span><span class="s4">(</span><span class="s1">rdtype</span><span class="s4">)</span>
    <span class="s1">r </span><span class="s4">= </span><span class="s1">RRset</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s1">rdclass</span><span class="s4">, </span><span class="s1">rdtype</span><span class="s4">)</span>
    <span class="s1">r</span><span class="s4">.</span><span class="s1">update_ttl</span><span class="s4">(</span><span class="s1">ttl</span><span class="s4">)</span>
    <span class="s3">for </span><span class="s1">t </span><span class="s3">in </span><span class="s1">text_rdatas</span><span class="s4">:</span>
        <span class="s1">rd </span><span class="s4">= </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdata</span><span class="s4">.</span><span class="s1">from_text</span><span class="s4">(</span>
            <span class="s1">r</span><span class="s4">.</span><span class="s1">rdclass</span><span class="s4">, </span><span class="s1">r</span><span class="s4">.</span><span class="s1">rdtype</span><span class="s4">, </span><span class="s1">t</span><span class="s4">, </span><span class="s1">origin</span><span class="s4">, </span><span class="s1">relativize</span><span class="s4">, </span><span class="s1">relativize_to</span><span class="s4">, </span><span class="s1">idna_codec</span>
        <span class="s4">)</span>
        <span class="s1">r</span><span class="s4">.</span><span class="s1">add</span><span class="s4">(</span><span class="s1">rd</span><span class="s4">)</span>
    <span class="s3">return </span><span class="s1">r</span>


<span class="s3">def </span><span class="s1">from_text</span><span class="s4">(</span>
    <span class="s1">name</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">ttl</span><span class="s4">: </span><span class="s1">int</span><span class="s4">,</span>
    <span class="s1">rdclass</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdataclass</span><span class="s4">.</span><span class="s1">RdataClass</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">rdtype</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdatatype</span><span class="s4">.</span><span class="s1">RdataType</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s4">*</span><span class="s1">text_rdatas</span><span class="s4">: </span><span class="s1">Any</span><span class="s4">,</span>
<span class="s4">) </span><span class="s1">-&gt; RRset</span><span class="s4">:</span>
    <span class="s2">&quot;&quot;&quot;Create an RRset with the specified name, TTL, class, and type and with 
    the specified rdatas in text format. 
 
    Returns a ``dns.rrset.RRset`` object. 
    &quot;&quot;&quot;</span>

    <span class="s3">return </span><span class="s1">from_text_list</span><span class="s4">(</span>
        <span class="s1">name</span><span class="s4">, </span><span class="s1">ttl</span><span class="s4">, </span><span class="s1">rdclass</span><span class="s4">, </span><span class="s1">rdtype</span><span class="s4">, </span><span class="s1">cast</span><span class="s4">(</span><span class="s1">Collection</span><span class="s4">[</span><span class="s1">str</span><span class="s4">], </span><span class="s1">text_rdatas</span><span class="s4">)</span>
    <span class="s4">)</span>


<span class="s3">def </span><span class="s1">from_rdata_list</span><span class="s4">(</span>
    <span class="s1">name</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">, </span><span class="s1">str</span><span class="s4">],</span>
    <span class="s1">ttl</span><span class="s4">: </span><span class="s1">int</span><span class="s4">,</span>
    <span class="s1">rdatas</span><span class="s4">: </span><span class="s1">Collection</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdata</span><span class="s4">.</span><span class="s1">Rdata</span><span class="s4">],</span>
    <span class="s1">idna_codec</span><span class="s4">: </span><span class="s1">Optional</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">IDNACodec</span><span class="s4">] = </span><span class="s3">None</span><span class="s4">,</span>
<span class="s4">) </span><span class="s1">-&gt; RRset</span><span class="s4">:</span>
    <span class="s2">&quot;&quot;&quot;Create an RRset with the specified name and TTL, and with 
    the specified list of rdata objects. 
 
    *idna_codec*, a ``dns.name.IDNACodec``, specifies the IDNA 
    encoder/decoder to use; if ``None``, the default IDNA 2003 
    encoder/decoder is used. 
 
    Returns a ``dns.rrset.RRset`` object. 
 
    &quot;&quot;&quot;</span>

    <span class="s3">if </span><span class="s1">isinstance</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s1">str</span><span class="s4">):</span>
        <span class="s1">name </span><span class="s4">= </span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">from_text</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s3">None</span><span class="s4">, </span><span class="s1">idna_codec</span><span class="s4">=</span><span class="s1">idna_codec</span><span class="s4">)</span>

    <span class="s3">if </span><span class="s1">len</span><span class="s4">(</span><span class="s1">rdatas</span><span class="s4">) == </span><span class="s6">0</span><span class="s4">:</span>
        <span class="s3">raise </span><span class="s1">ValueError</span><span class="s4">(</span><span class="s5">&quot;rdata list must not be empty&quot;</span><span class="s4">)</span>
    <span class="s1">r </span><span class="s4">= </span><span class="s3">None</span>
    <span class="s3">for </span><span class="s1">rd </span><span class="s3">in </span><span class="s1">rdatas</span><span class="s4">:</span>
        <span class="s3">if </span><span class="s1">r </span><span class="s3">is None</span><span class="s4">:</span>
            <span class="s1">r </span><span class="s4">= </span><span class="s1">RRset</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s1">rd</span><span class="s4">.</span><span class="s1">rdclass</span><span class="s4">, </span><span class="s1">rd</span><span class="s4">.</span><span class="s1">rdtype</span><span class="s4">)</span>
            <span class="s1">r</span><span class="s4">.</span><span class="s1">update_ttl</span><span class="s4">(</span><span class="s1">ttl</span><span class="s4">)</span>
        <span class="s1">r</span><span class="s4">.</span><span class="s1">add</span><span class="s4">(</span><span class="s1">rd</span><span class="s4">)</span>
    <span class="s3">assert </span><span class="s1">r </span><span class="s3">is not None</span>
    <span class="s3">return </span><span class="s1">r</span>


<span class="s3">def </span><span class="s1">from_rdata</span><span class="s4">(</span><span class="s1">name</span><span class="s4">: </span><span class="s1">Union</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">name</span><span class="s4">.</span><span class="s1">Name</span><span class="s4">, </span><span class="s1">str</span><span class="s4">], </span><span class="s1">ttl</span><span class="s4">: </span><span class="s1">int</span><span class="s4">, *</span><span class="s1">rdatas</span><span class="s4">: </span><span class="s1">Any</span><span class="s4">) </span><span class="s1">-&gt; RRset</span><span class="s4">:</span>
    <span class="s2">&quot;&quot;&quot;Create an RRset with the specified name and TTL, and with 
    the specified rdata objects. 
 
    Returns a ``dns.rrset.RRset`` object. 
    &quot;&quot;&quot;</span>

    <span class="s3">return </span><span class="s1">from_rdata_list</span><span class="s4">(</span><span class="s1">name</span><span class="s4">, </span><span class="s1">ttl</span><span class="s4">, </span><span class="s1">cast</span><span class="s4">(</span><span class="s1">Collection</span><span class="s4">[</span><span class="s1">dns</span><span class="s4">.</span><span class="s1">rdata</span><span class="s4">.</span><span class="s1">Rdata</span><span class="s4">], </span><span class="s1">rdatas</span><span class="s4">))</span>
</pre>
</body>
</html>